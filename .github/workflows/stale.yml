name: 'Close Stale Issues'

on:
  schedule:
    # Ejecutar cada d칤a a las 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch: # Permitir ejecuci칩n manual

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v9
        with:
          # Issues configuration
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,critical,roadmap'
          stale-issue-message: |
            游녦 Este issue lleva **60 d칤as sin actividad** y ha sido marcado como `stale`.
            
            **쯉igue siendo relevante?**
            - Si el problema persiste, por favor comenta y proporcionaremos ayuda
            - Si ya est치 resuelto, puedes cerrar el issue
            - Si no hay actividad en **14 d칤as**, se cerrar치 autom치ticamente
            
            Para evitar que se cierre:
            - Comenta en este issue explicando el estado actual
            - A침ade la etiqueta `pinned` si es importante mantenerlo abierto
            
            Gracias por tu contribuci칩n al proyecto ECONEURA 游
          
          close-issue-message: |
            游 Este issue ha sido cerrado autom치ticamente por inactividad (74 d칤as sin respuesta).
            
            **쯅ecesitas reabrirlo?**
            Si el problema persiste o necesitas ayuda:
            1. Comenta en este issue con informaci칩n actualizada
            2. Un mantenedor revisar치 y reabrir치 si es necesario
            
            O abre un nuevo issue con:
            - Referencia a este issue: #${issue.number}
            - Informaci칩n actualizada sobre el problema
            - Pasos de reproducci칩n actuales
            
            춰Gracias por usar ECONEURA! 游똂
          
          # Pull Requests configuration
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,work-in-progress'
          stale-pr-message: |
            游녦 Este PR lleva **30 d칤as sin actividad** y ha sido marcado como `stale`.
            
            **쯅ecesitas ayuda para completarlo?**
            - Si necesitas ayuda de los mantenedores, menciona @ECONEURA
            - Si hay blockers, describe qu칠 impide avanzar
            - Si no hay actividad en **7 d칤as**, se cerrar치 autom치ticamente
            
            Para evitar que se cierre:
            - Actualiza el PR con nuevos commits
            - Comenta el estado actual del desarrollo
            - A침ade la etiqueta `work-in-progress` si est치s trabajando activamente
            
            Gracias por tu contribuci칩n 游
          
          close-pr-message: |
            游 Este PR ha sido cerrado autom치ticamente por inactividad (37 d칤as sin respuesta).
            
            **쯈uieres retomar el trabajo?**
            1. Comenta en este PR explicando tu plan
            2. Un mantenedor revisar치 y podr치 reabrir
            3. O abre un nuevo PR con referencia a este: #${pr.number}
            
            **Si alguien m치s quiere continuarlo:**
            - Puedes hacer fork desde el branch de este PR
            - Abre un nuevo PR mencionando el original
            
            춰Gracias por tu tiempo! 游똂
          
          # General configuration
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true # Procesar issues m치s antiguos primero
          
          # Debug (cambiar a true solo para testing)
          debug-only: false
